(function(e){function t(t){for(var n,s,i=t[0],l=t[1],u=t[2],d=0,f=[];d<i.length;d++)s=i[d],r[s]&&f.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,i=1;i<o.length;i++){var l=o[i];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var n=o("64a9"),r=o.n(n);r.a},"0970":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"Hello":"Hello","WelcometoOpenFurniture":"Welcome to OpenFurniture"},"ua":{"Login":"Логін","Password":"Пароль","Enter your login":"Введіть ваш логін","Enter your password":"Введіть ваш пароль","Sign Up":"Реєстрація","Confirm your password":"Подтвердіть ваш пароль","Confirm password":"Підтвердіть пароль","Admin":"Адміністратор"}}'),delete e.options._Ctor}},"0a8e":function(e,t,o){"use strict";var n=o("90f8"),r=o.n(n);t["default"]=r.a},"0cf3":function(e,t,o){"use strict";var n=o("854d"),r=o.n(n);r.a},"0fa9":function(e,t,o){"use strict";var n=o("e483"),r=o.n(n);r.a},1414:function(e,t,o){},"15e3":function(e,t,o){},"1b08":function(e,t,o){},"2e05":function(e,t,o){"use strict";var n=o("e145"),r=o.n(n);t["default"]=r.a},"306a":function(e,t,o){"use strict";var n=o("54c5"),r=o.n(n);r.a},4384:function(e,t,o){"use strict";var n=o("7fc3"),r=o.n(n);t["default"]=r.a},"45f5":function(e,t,o){"use strict";var n=o("1414"),r=o.n(n);r.a},"534a":function(e,t,o){"use strict";var n=o("ea61"),r=o.n(n);t["default"]=r.a},"54c5":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("097d");var n=o("2b0e"),r=o("bc3a"),a=o.n(r),s={baseURL:"http://localhost:3000/"},i=a.a.create(s);i.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),i.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)}),Plugin.install=function(e,t){e.axios=i,window.axios=i,Object.defineProperties(e.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},n["a"].use(Plugin);Plugin;var l=o("9f7b");o("ab8b"),o("2dd8");n["a"].use(l["a"]);var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("Header"),o("router-view"),o("Footer",{ref:"footer"})],1)},c=[],d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"header"},[o("div",[o("b-navbar",{attrs:{type:"dark",variant:"primary",toggleable:""}},[o("b-navbar-brand",[e._v("OpenFurniture")]),o("b-navbar-toggle",{attrs:{target:"nav_dropdown_collapse"}}),o("b-collapse",{attrs:{"is-nav":"",id:"nav_dropdown_collapse"}},[o("b-navbar-nav",[o("b-nav-item",{attrs:{to:"/"}},[e._v(e._s(e.$t("Home")))]),e.isAdmin?o("b-button",{staticClass:"my-sm-0 ml-3",attrs:{variant:"danger"},on:{click:function(t){e.$router.push("/dashboard")}}},[e._v(e._s(e.$t("Admin dashboard")))]):e._e(),e.isProfileLoaded?o("b-button",{staticClass:"my-sm-0 ml-3",attrs:{variant:"success",size:"sm"},on:{click:function(t){e.$router.push("/controll")}}},[e._v(e._s(e.$t("Controll state")))]):e._e(),e.isProfileLoaded?o("b-button",{staticClass:"my-sm-0 ml-3",attrs:{variant:"success",size:"sm"},on:{click:function(t){e.$router.push("/rooms")}}},[e._v(e._s(e.$t("Buy rooms")))]):e._e()],1),o("b-navbar-nav",{staticClass:"ml-auto"},[e.isAuthenticated?e._e():o("b-nav-item",{attrs:{to:"/login"}},[e._v(e._s(e.$t("Sign In")))]),e.isAuthenticated?e._e():o("b-nav-item",{attrs:{to:"/register"}},[e._v(e._s(e.$t("Sign Up")))]),o("b-nav-item-dropdown",{attrs:{text:e.$t("Lang"),right:""}},[o("b-dropdown-item",{on:{click:function(t){e.setLocale("en")}}},[e._v(e._s(e.$t("EN")))]),o("b-dropdown-item",{on:{click:function(t){e.setLocale("ua")}}},[e._v(e._s(e.$t("UA")))])],1),e.isProfileLoaded?o("b-nav-item-dropdown",{attrs:{text:e.getProfile.login,right:""}},[o("b-dropdown-item",{attrs:{to:"/account"}},[e._v(e._s(e.$t("Account")))]),o("b-dropdown-item",{attrs:{to:"/logout"}},[e._v(e._s(e.$t("Logout")))])],1):e._e()],1)],1)],1)],1)])},f=[],m=o("be94"),b=o("2f62"),p={name:"TheHeader",data:function(){return{locale:"en"}},mounted:function(){this.$parent.$refs.footer.logLocale()},computed:Object(m["a"])({getProfile:function(){return this.$store.getters.getProfile}},Object(b["b"])(["isAuthenticated","isProfileLoaded","isAdmin"])),methods:{showLocaleFooter:function(){this.$parent.$refs.footer.logLocale()},setLocale:function(e){this.locale=e,this.$parent.$refs.footer.logLocale()}},watch:{locale:function(e,t){this.$root.$i18n.locale=e}}},h=p,g=(o("dcdf"),o("2877")),v=o("534a"),_=Object(g["a"])(h,d,f,!1,null,"baa04d4c",null);"function"===typeof v["default"]&&Object(v["default"])(_),_.options.__file="TheHeader.vue";var y=_.exports,w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},R=[],k={name:"Footer",data:function(){return{}},mounted:function(){},methods:{logLocale:function(){console.log(this.$i18n.locale)}}},x=k,O=(o("65da"),o("2e05")),E=Object(g["a"])(x,w,R,!1,null,"0f927984",null);"function"===typeof O["default"]&&Object(O["default"])(E),E.options.__file="TheFooter.vue";var S=E.exports,C={name:"app",data:function(){return{}},components:{Header:y,Footer:S}},q=C,$=(o("034f"),Object(g["a"])(q,u,c,!1,null,null,null));$.options.__file="App.vue";var j=$.exports,A=o("8c4f"),P=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"mt-5"},[e._l(e.errors,function(t,n){return o("b-alert",{key:n,attrs:{variant:t.variant,show:!!t}},[e._v(e._s(t.msg))])}),o("b-container",{staticClass:"bv-example-row"},[o("b-row",[o("b-col",{staticClass:"mx-auto",attrs:{cols:"8"}},[o("b-form",{attrs:{novalidated:""},on:{submit:function(t){return t.preventDefault(),e.handleRegister(t)}}},[o("h1",[e._v("Edit user profile up")]),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:"Login","label-for":"login"}},[o("b-form-input",{attrs:{id:"login",size:"lg",autocomplete:"on",required:"",type:"text",placeholder:"Enter your login"},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:"Password","label-for":"password"}},[o("b-form-input",{attrs:{id:"password",size:"lg",autocomplete:"on",required:"",type:"password",placeholder:"Enter new password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:"Confirm password","label-for":"confirmPassword"}},[o("b-form-input",{attrs:{id:"confirmPassword",size:"lg",autocomplete:"on",required:"",type:"password",placeholder:"Confirm new password"},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:"Admin","label-for":"usertype"}},[o("b-form-checkbox",{attrs:{size:"lg",id:"usertype",value:"admin","unchecked-value":"user"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),o("hr"),o("b-button",{staticClass:"float-right",attrs:{variant:"success",size:"lg",type:"submit"}},[e._v("Save changes")])],1)],1)],1)],1)],2)},F=[],U=(o("ac6a"),a.a.create({baseURL:"http://localhost:3000",headers:{Accept:"application/json","Content-Type":"application/json"}})),B="USER_REQUEST",z="USER_SUCCESS",T="USER_ERROR",I="USER_UPDATE",L="USER_SUCCESS",D="USER_ERROR",V={name:"login",data:function(){return{errors:[],type:"user",login:"",password:"",confirmPassword:"",validationErrors:""}},computed:Object(m["a"])({},Object(b["b"])(["getProfile","isAuthenticated"])),methods:{handleRegister:function(){var e=this,t=this.login,o=this.password,n=this.confirmPassword;this.$store.dispatch(I,{login:t,password:o,confirmPassword:n}).then(function(t){if(e.errors=[],console.log("Result: ",t),t.err)if("Validation errors"==t.err){var o=t.validationErrors;o.forEach(function(t){e.errors.push({msg:t.msg,variant:"danger"})})}else e.errors.push({msg:t.err,variant:"danger"});else e.errors.push({msg:"Success updated",variant:"success"})}).catch(function(e){console.log(e)})}}},H=V,W=(o("0fa9"),Object(g["a"])(H,P,F,!1,null,"7ce2e6bd",null));W.options.__file="Account.vue";var M=W.exports,N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{staticClass:"bv-example-row"},[e._l(e.errors,function(t,n){return o("b-alert",{key:n,attrs:{variant:"danger",show:!!t}},[e._v(e._s(t.msg))])}),o("b-row",[o("b-col",{attrs:{cols:"8"}},[o("b-form",{staticClass:"form-signin",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.handleLogin(t)}}},[o("h1",{staticClass:"form-signin-heading"},[e._v("Sign in")]),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:"Small","label-for":"validationCustomLogin"}},[o("b-form-input",{attrs:{id:"validationCustomLogin",size:"lg",autocomplete:"on",required:"",type:"text",placeholder:"Enter your login"},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:"Password","label-for":"password"}},[o("b-form-input",{attrs:{id:"password",size:"lg",autocomplete:"on",required:"",type:"password",placeholder:"Enter your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),o("hr"),o("b-button",{staticClass:"float-right",attrs:{variant:"success",size:"lg",type:"submit"}},[e._v("Sign In")])],1)],1)],1)],2)},G=[],Q="AUTH_REQUEST",J="AUTH_SUCCESS",Y="AUTH_ERROR",K="AUTH_LOGOUT",X={name:"login",data:function(){return{errors:[],login:"",password:""}},methods:{handleLogin:function(){var e=this,t=this.login,o=this.password;this.$store.dispatch(Q,{login:t,password:o}).then(function(t){"Success login"!=t.message?(e.errors=[],e.errors.push({msg:t.err.message})):e.$router.push("/")}).catch(function(e){console.log(e)})}}},Z=X,ee=(o("306a"),Object(g["a"])(Z,N,G,!1,null,"0fa9601e",null));ee.options.__file="Login.vue";var te=ee.exports,oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"mt-5"},[e._l(e.errors,function(t,n){return o("b-alert",{key:n,attrs:{variant:"danger",show:!!t}},[e._v(e._s(t.msg))])}),o("b-container",{staticClass:"bv-example-row"},[o("b-row",[o("b-col",{staticClass:"mx-auto",attrs:{cols:"8"}},[o("b-form",{attrs:{novalidated:""},on:{submit:function(t){return t.preventDefault(),e.handleRegister(t)}}},[o("h1",[e._v(e._s(e.$t("Sign Up")))]),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:e.$t("Login"),"label-for":"login"}},[o("b-form-input",{attrs:{id:"login",size:"lg",autocomplete:"on",required:"",type:"text",placeholder:e.$t("Enter your login")},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:e.$t("Password"),"label-for":"password"}},[o("b-form-input",{attrs:{id:"password",size:"lg",autocomplete:"on",required:"",type:"password",placeholder:e.$t("Enter your password")},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:e.$t("Confirm password"),"label-for":"confirmPassword"}},[o("b-form-input",{attrs:{id:"confirmPassword",size:"lg",autocomplete:"on",required:"",type:"password",placeholder:e.$t("Confirm your password")},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),o("b-form-group",{attrs:{horizontal:"","label-cols":3,"label-size":"lg",label:e.$t("Admin"),"label-for":"usertype"}},[o("b-form-checkbox",{attrs:{size:"lg",id:"usertype",value:"admin","unchecked-value":"user"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),o("hr"),o("b-button",{staticClass:"float-right",attrs:{variant:"success",size:"lg",type:"submit"}},[e._v("Sign Up")])],1)],1)],1)],1)],2)},ne=[],re="REGISTER_REQUEST",ae="REGISTER_SUCCESS",se="REGISTER_ERROR",ie={name:"login",data:function(){return{errors:[],type:"user",login:"",password:"",confirmPassword:"",validationErrors:""}},methods:{handleRegister:function(){var e=this,t=this.login,o=this.password,n=this.confirmPassword,r=this.type;this.$store.dispatch(re,{login:t,password:o,confirmPassword:n,type:r}).then(function(t){if(e.errors=[],console.log("Result: ",t),t.err)if("Validation errors"==t.err){var o=t.validationErrors;o.forEach(function(t){e.errors.push({msg:t.msg})})}else e.errors.push({msg:t.err});else e.$router.push("/login")}).catch(function(e){console.log(e)})}}},le=ie,ue=(o("0cf3"),o("fef3")),ce=Object(g["a"])(le,oe,ne,!1,null,"3bf5b5c6",null);"function"===typeof ue["default"]&&Object(ue["default"])(ce),ce.options.__file="Register.vue";var de=ce.exports,fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("b-jumbotron",[o("template",{slot:"header"},[e._v(e._s(e.$t("Hello"))+" "+e._s(e.getProfile.login?e.getProfile.login:"guest"))]),o("template",{slot:"lead"},[e._v(e._s(e.$t("WelcometoOpenFurniture")))]),o("hr",{staticClass:"my-4"}),o("p",[e._v(e._s(e.$t("We can help you to customize your space in hotel")))]),o("b-btn",{attrs:{variant:"success",size:"lg"},on:{click:e.handleClick}},[e._v(e._s(e.$t("Get Started")))])],2)],1)},me=[],be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",variant:"warning"},on:{dismissed:e.handleDissmiss,"dismiss-count-down":e.countDownChanged}},[e._v(e._s(e.msg))])],1)},pe=[],he={props:{msg:{type:String,default:"Error"}},data:function(){return{dismissSecs:10,dismissCountDown:0,showDismissibleAlert:!1}},methods:{handleDissmiss:function(){this.dismissCountDown=0,thos.$emit("dissmissed")},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs}}},ge=he,ve=Object(g["a"])(ge,be,pe,!1,null,null,null);ve.options.__file="Error.vue";var _e=ve.exports,ye={name:"Welcome",data:function(){return{errors:[]}},components:{Error:_e},mounted:function(){console.log(this.$i18n),this.isAuthenticated&&this.handleUserRequest()},computed:Object(m["a"])({},Object(b["b"])(["getProfile","isAuthenticated"]),{getNumber:function(){return this.$store.state.number}}),methods:{handleUserRequest:function(){this.$store.dispatch(B)},handleClick:function(e){localStorage.setItem("number",10)}}},we=ye,Re=(o("7d8b"),o("0a8e")),ke=Object(g["a"])(we,fe,me,!1,null,"25386714",null);"function"===typeof Re["default"]&&Object(Re["default"])(ke),ke.options.__file="Welcome.vue";var xe=ke.exports,Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{staticClass:"bv-example-row"},[o("b-row",[o("b-col",{attrs:{cols:"6"}},[o("h1",{staticClass:"my-4"},[e._v(e._s(e.$t("Buy rooms")))]),0==e.rooms.length?o("b-card",[o("p",{staticClass:"card-text text-center"},[e._v(e._s(e.$t("No availiable rooms")))])]):e._e(),e._l(e.rooms,function(t){return[o("b-card",{key:t[0],staticClass:"mb-1"},[o("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[o("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse"+t[0],expression:"'collapse'+room[0]"}],attrs:{disabled:e.isBusy,block:"",href:"#",variant:"info"}},[e._v(e._s(e.$t("Room number:"))+" "+e._s(Object.values(t[1])[0][0].num))])],1),o("b-collapse",{attrs:{id:"collapse"+t[0],visible:"",accordion:"my-accordion",role:"tabpanel"}},[o("b-card-body",[o("b-card-group",{attrs:{deck:""}},e._l(Object.values(t[1]),function(t,n){return o("b-card",{key:n,staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:t[0].name,"img-src":t[0].src,"img-alt":"Image","img-top":"",tag:"article"}},[o("b-badge",{attrs:{slot:"header",pill:"",variant:"primary"},slot:"header"},[e._v("x"+e._s(t[1]))])],1)})),o("b-button",{attrs:{disabled:e.isBusy,variant:"success"},on:{click:function(o){e.handleBuy(t[0])}}},[e._v(e._s(e.$t("Buy this room")))])],1)],1)],1)]})],2)],1)],1)},Ee=[],Se=(o("f400"),o("5df3"),o("1c4c"),{name:"Rooms",data:function(){return{isBusy:!1,rooms:[]}},mounted:function(){var e=this;this.isBusy=!0,this.isAuthenticated&&this.handleUserRequest(),this.getRooms().then(function(t){e.rooms=t,e.isBusy=!1})},computed:Object(m["a"])({},Object(b["b"])(["getProfile","isAuthenticated"])),methods:{handleUserRequest:function(){this.$store.dispatch(B)},getRooms:function(){var e=this;return new Promise(function(t,o){U.get("/room/getavailiable").then(function(o){var n=o.data,r=Array.from(e.groupBy(n,function(e){return e.IdRoom})),a=r.map(function(t,o){return console.log(o),[t[0],e.unique(t[1])]});t(a),console.log("res: ",e.rooms)}).catch(function(e){o(e)})})},handleBuy:function(e){var t=this;this.isBusy=!0;var o=this.getProfile.IdUser;U.post("/user/".concat(o,"/rooms/").concat(e)).then(function(e){return 200!=e.status&&alert(e.data.err),t.getRooms()}).then(function(e){t.rooms=e,t.isBusy=!1})},groupBy:function(e,t){var o=new Map;return e.forEach(function(e){var n=t(e),r=o.get(n);r?r.push(e):o.set(n,[e])}),o},unique:function(e){for(var t={},o=0;o<e.length;o++){var n=e[o].IdFurniture;t[n]=t[n]?[e[o],t[n][1]+1]:[e[o],1]}return t}}}),Ce=Se,qe=(o("9306"),o("4384")),$e=Object(g["a"])(Ce,Oe,Ee,!1,null,"62318406",null);"function"===typeof qe["default"]&&Object(qe["default"])($e),$e.options.__file="Rooms.vue";var je=$e.exports,Ae=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{staticClass:"bv-example-row"},[o("b-row",[o("b-col",{attrs:{cols:"8"}},[o("h1",{staticClass:"my-4"},[e._v("Controll my rooms")]),0==e.rooms.length?o("b-card",[o("p",{staticClass:"card-text text-center"},[e._v("You have not buy any room")])]):e._e(),e._l(e.rooms,function(t){return[o("b-card",{key:t[0],staticClass:"mb-1"},[o("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[o("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse"+t[0],expression:"'collapse'+room[0]"}],attrs:{block:"",href:"#",variant:"info"}},[e._v("Room number: "+e._s(t[1][0].num))])],1),o("b-collapse",{attrs:{id:"collapse"+t[0],visible:"",accordion:"my-accordion",role:"tabpanel"}},[o("b-card-body",[o("b-card-group",{attrs:{deck:""}},[e._l(t[1],function(n,r){return o("b-card",{key:r,staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:n.name,"img-src":n.src,"img-alt":"Image","img-top":"",tag:"article"}},[o("b-form-checkbox",{attrs:{disabled:e.isBusy,id:"checkbox"+10*t[0]+r,value:"unlock","unchecked-value":"lock"},model:{value:e.roomUnlock[10*t[0]+r].unlock,callback:function(o){e.$set(e.roomUnlock[10*t[0]+r],"unlock",o)},expression:"roomUnlock[room[0]*10 + index].unlock"}},[e._v(e._s(e.roomUnlock[10*t[0]+r].unlock))]),o("label",{attrs:{for:"'range'+ room[0] + index"}},[e._v("Height: "+e._s(e.roomUnlock[10*t[0]+r].height))]),o("b-form-input",{attrs:{disabled:e.isBusy,type:"range",id:"range"+10*t[0]+r,min:"0",max:"100"},model:{value:e.roomUnlock[10*t[0]+r].height,callback:function(o){e.$set(e.roomUnlock[10*t[0]+r],"height",o)},expression:"roomUnlock[room[0]*10 + index].height"}}),o("b-button",{attrs:{variant:"success",disabled:e.isBusy},on:{click:function(o){e.handleSetStateClick(10*t[0]+r,n.id)}}},[e._v("Set State")])],1)}),o("b-button",{staticClass:"mx-auto my-auto",attrs:{variant:"danger",disabled:e.isBusy},on:{click:function(o){e.handleDelete(t[0])}}},[e._v("Delete this room")])],2)],1)],1)],1)]})],2)],1)],1)},Pe=[],Fe={name:"Controll",data:function(){return{isBusy:!1,roomUnlock:[],rooms:[]}},computed:Object(m["a"])({},Object(b["b"])(["getProfile","isAuthenticated"])),mounted:function(){var e=this;console.log(this.$i118n),this.isAuthenticated&&this.handleUserRequest().then(function(t){e.loadRooms()}).catch(function(e){console.log(e)})},methods:{handleDelete:function(e){var t=this,o=this.getProfile.IdUser;this.isBusy=!0,U.delete("user/".concat(o,"/rooms/").concat(e)).then(function(e){t.loadRooms()}).catch(function(e){console.log(e)})},loadRooms:function(){var e=this;this.getRooms().then(function(t){if(t.data.length>0){var o=Array.from(e.groupBy(t.data,function(e){return e.IdRoom}));e.rooms=o,e.rooms.forEach(function(t){t[1].forEach(function(o,r){n["a"].set(e.roomUnlock,10*t[0]+r,{height:o.height,unlock:o.unlock?"unlock":"lock"})})}),e.isBusy=!1}else e.rooms=[],e.roomUnlock=[]})},handleSetStateClick:function(e,t){var o=this,n=this.roomUnlock[e],r=n.height,a=n.unlock,s="unlock"==a?1:0;this.isBusy=!0,U.put("room/setstate",{height:r,unlock:s,id:t}).then(function(e){o.loadRooms()}).catch(function(e){console.log(e)})},groupBy:function(e,t){var o=new Map;return e.forEach(function(e){var n=t(e),r=o.get(n);r?r.push(e):o.set(n,[e])}),o},handleUserRequest:function(){var e=this;return new Promise(function(t,o){e.$store.dispatch(B).then(function(e){t(e)}).catch(function(e){o(e)})})},getRooms:function(){return new Promise(function(e,t){U.get("user/rooms").then(function(t){e(t)}).catch(function(e){t(e)})})}}},Ue=Fe,Be=(o("9fe6"),Object(g["a"])(Ue,Ae,Pe,!1,null,"ba0262ae",null));Be.options.__file="Controll.vue";var ze=Be.exports,Te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{staticClass:"bv-example-row"},[o("b-row",[o("b-col",{staticClass:"my-4 mx-auto",attrs:{cols:"8"}},[o("h1",[e._v("Admin dashboard")]),o("DBTable",{attrs:{"update-request":e.roomTable.updateRequest,"add-request":e.roomTable.addRequest,name:"Room","delete-request":e.roomTable.deleteRequest,fields:e.roomTable.fields,request:e.roomTable.getRequest}}),o("hr"),o("DBTable",{attrs:{"update-request":e.furnitureTable.updateRequest,"add-request":e.furnitureTable.addRequest,name:"Furniture","delete-request":e.furnitureTable.deleteRequest,fields:e.furnitureTable.fields,request:e.furnitureTable.getRequest}}),o("hr"),o("DBTable",{attrs:{"update-request":e.roomFurnitureTable.updateRequest,"add-request":e.roomFurnitureTable.addRequest,name:"Room Furniture","delete-request":e.roomFurnitureTable.deleteRequest,fields:e.roomFurnitureTable.fields,request:e.roomFurnitureTable.getRequest}})],1)],1)],1)},Ie=[],Le=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("b-modal",{ref:"modal",attrs:{id:"addForm",title:"Add new "+e.name},on:{ok:e.handleAdd,shown:e.clearAddFields},model:{value:e.showAddForm,callback:function(t){e.showAddForm=t},expression:"showAddForm"}},[o("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmitAddForm(t)}}},[e._l(e.addRequest.body,function(t){return["text"==t.type?o("b-form-group",{key:t.name,attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:t.name,"label-for":t.name}},[o("b-form-input",{attrs:{id:"input.name",type:"text"},model:{value:e.addValues[t.name].value,callback:function(o){e.$set(e.addValues[t.name],"value",o)},expression:"addValues[input.name].value"}})],1):"combobox"==t.type?o("b-form-group",{key:t.name,attrs:{horizontal:"","label-cols":3,"label-size":"lg",label:t.name,"label-for":t.name}},[o("b-dropdown",{staticClass:"m-md-2",attrs:{id:t.name,text:e.addValues[t.name].text}},e._l(e.addValues[t.name].values,function(n){return o("b-dropdown-item",{key:n[t.name],on:{click:function(o){e.handleDropClick(n,t.name)}}},[e._v(e._s(n.text))])}))],1):e._e()]})],2)]),o("b-modal",{ref:"editModal",attrs:{id:"editForm",title:"Edit "+e.name},on:{ok:e.handleEdit,shown:e.clearAddFields},model:{value:e.showEditForm,callback:function(t){e.showEditForm=t},expression:"showEditForm"}},[o("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmitEditForm(t)}}},[e._l(e.addRequest.body,function(t){return["text"==t.type?o("b-form-group",{key:t.name,attrs:{horizontal:"","label-cols":2,"label-size":"lg",label:t.name,"label-for":t.name}},[o("b-form-input",{attrs:{id:"input.name",type:"text"},model:{value:e.addValues[t.name].value,callback:function(o){e.$set(e.addValues[t.name],"value",o)},expression:"addValues[input.name].value"}})],1):"combobox"==t.type?o("b-form-group",{key:t.name,attrs:{horizontal:"","label-cols":3,"label-size":"lg",label:t.name,"label-for":t.name}},[o("b-dropdown",{staticClass:"m-md-2",attrs:{id:t.name,text:e.addValues[t.name].text}},e._l(e.addValues[t.name].values,function(n){return o("b-dropdown-item",{key:n[t.name],on:{click:function(o){e.handleDropClick(n,t.name)}}},[e._v(e._s(n.text))])}))],1):e._e()]})],2)]),e.addRequest.url.length>0?o("b-button",{staticClass:"my-3",attrs:{variant:"success",disabled:e.isBusy},on:{click:e.showAddModal}},[e._v("Add "+e._s(e.name))]):e._e(),o("b-table",{ref:"table",attrs:{busy:e.isBusy,fields:e.fields,striped:"",hover:"",items:e.provider},scopedSlots:e._u([{key:"Actions",fn:function(t){return[o("b-button-group",[e.deleteRequest?o("b-button",{attrs:{disabled:e.isBusy,variant:"danger"},on:{click:function(o){e.handleDelete(t.item)}}},[e._v("Delete")]):e._e(),e.updateRequest?o("b-button",{attrs:{disabled:e.isBusy,variant:"warning"},on:{click:function(o){e.handleEditClick(t.item)}}},[e._v("Edit")]):e._e()],1)]}}])})],1)},De=[],Ve=(o("7514"),o("7f7f"),{name:"DBTable",props:{name:{type:String,default:"Table"},request:{type:Object,default:function(){return{url:""}}},addRequest:{type:Object,default:function(){return{url:"",body:[]}}},deleteRequest:{type:Object,default:function(){return{url:"",body:null}}},updateRequest:{type:Object,default:function(){return{url:"",body:null}}},byIdComboBox:{type:Object,default:function(){return null}},fields:{type:Array,default:function(){return[]}}},data:function(){return{addValues:new Object,updateId:new Object,addRequestObj:null,isBusy:!1,showAddForm:!1,showEditForm:!1}},created:function(){var e=this;this.addRequest.body.forEach(function(t){var o=t.name;if(console.log(o),"text"==t.type)e.$set(e.addValues,o,{value:""});else if("combobox"==t.type){var n=t.innerRequest.url,r=t.innerRequest,a=r.bindField,s=r.textField;e.$set(e.addValues,o,{values:[],bind:"",text:""}),U.get(n).then(function(t){var n=t.data.map(function(e,t,o){var n={};return n.bind=e[a],n.text=e[s],n});console.log(n),e.$set(e.addValues,o,{values:n,bind:"",text:"Select "+o})})}})},methods:{handleEditClick:function(e){var t=this,o=this.updateRequest.body;console.log(o),o.forEach(function(o){e[o]&&(t.updateId[o]=e[o])}),this.showEditForm=!0},provider:function(e){var t=U.get(this.request.url);return console.log("working provider"),t.then(function(e){console.log(e);var t=e.data;return t||[]})},handleEdit:function(e){var t=this,o=!1;for(var n in this.addValues)if(this.addValues.hasOwnProperty(n)){var r=this.addValues[n];r.value||r.bind||(o=!0)}if(o)alert("Empty fields");else{var a={},s=function(e){if(t.addValues.hasOwnProperty(e)){var o=t.addValues[e];if(o.value)a[e]=o.value;else if(o.bind){var n=t.addRequest.body.find(function(t){return t.name==e});if(n){var r=n.innerRequest.bindField;a[r]=o.bind}else a[e]=o.bind}}};for(var i in this.addValues)s(i);this.handleEditSubmit(a)}},handleAdd:function(e){var t=this;e.preventDefault();var o=!1;for(var n in this.addValues)if(this.addValues.hasOwnProperty(n)){var r=this.addValues[n];r.value||r.bind||(o=!0)}if(o)alert("Empty fields");else{var a={},s=function(e){if(t.addValues.hasOwnProperty(e)){var o=t.addValues[e];if(o.value)a[e]=o.value;else if(o.bind){var n=t.addRequest.body.find(function(t){return t.name==e});if(n){var r=n.innerRequest.bindField;a[r]=o.bind}else a[e]=o.bind}}};for(var i in this.addValues)s(i);this.handleAddSubmit(a)}},handleAddSubmit:function(e){var t=this,o=this.addRequest.url;U.post(o,e).then(function(e){t.isBusy=!0,t.$refs.table.refresh(),t.showAddForm=!1,t.isBusy=!1})},handleEditSubmit:function(e){var t=this,o=this.updateRequest.url,n=Object(m["a"])({},e,this.updateId);console.log(n),U.put(o,n).then(function(e){t.isBusy=!0,t.$refs.table.refresh(),t.showAddForm=!1,t.isBusy=!1})},clearAddFields:function(){for(var e in this.addValues)if(console.log(e),this.addValues.hasOwnProperty(e)){var t=this.addValues[e];t.value&&(t.value=""),t.bind&&(t.bind=0,t.text="Select "+e)}},showAddModal:function(){this.showAddForm=!0},handleDropClick:function(e,t){this.addValues[t].bind=e.bind,this.addValues[t].text=e.text,console.log({item:e,id:t})},handleDelete:function(e){var t=this,o=this.deleteRequest.body;console.log(o);var n={};o.forEach(function(t){e[t]&&(n[t]=e[t])}),console.log(n),U.delete(this.deleteRequest.url,{data:n}).then(function(e){t.isBusy=!0,t.$refs.table.refresh(),t.isBusy=!1}).catch(function(e){console.log("ERROR"),t.isBusy=!1})}}}),He=Ve,We=(o("e85e"),Object(g["a"])(He,Le,De,!1,null,"484d24a8",null));We.options.__file="DBTable.vue";var Me=We.exports,Ne={name:"Dashboard",data:function(){return{roomTable:{fields:["IdRoom","num","Actions"],getRequest:{url:"/room"},updateRequest:{url:"/room",body:["IdRoom"]},deleteRequest:{url:"/room",body:["IdRoom"]},addRequest:{url:"/room",body:[{type:"text",name:"num"}]}},roomFurnitureTable:{fields:["IdRoom","num","Actions"],getRequest:{url:"/room/furniture"},updateRequest:{url:"/room/furniture",body:["IdRoom","IdFurniture"]},deleteRequest:{url:"/room/furniture",body:["id"]},addRequest:{url:"/room/furniture",body:[{type:"combobox",name:"Furniture",innerRequest:{url:"/furniture",bindField:"IdFurniture",textField:"name"}},{type:"combobox",name:"Room num",innerRequest:{url:"/room",bindField:"IdRoom",textField:"num"}}]}},furnitureTable:{fields:["IdFurniture","name","type","src","Actions"],getRequest:{url:"/furniture"},updateRequest:{url:"/furniture",body:["IdFurniture"]},deleteRequest:{url:"/furniture",body:["IdFurniture"]},addRequest:{url:"/furniture",body:[{type:"text",name:"name"},{type:"text",name:"type"},{type:"text",name:"src"}]}}}},components:{DBTable:Me}},Ge=Ne,Qe=(o("45f5"),Object(g["a"])(Ge,Te,Ie,!1,null,"c585dbf0",null));Qe.options.__file="Dashboard.vue";var Je,Ye,Ke,Xe,Ze,et=Qe.exports,tt=o("ade3"),ot=(o("df7c"),o("f654"),{status:"",profile:{}}),nt={getProfile:function(e){return e.profile},isProfileLoaded:function(e){return!!e.profile.IdUser},isAdmin:function(e){return"admin"==e.profile.type}},rt=(Je={},Object(tt["a"])(Je,B,function(e){var t=e.commit,o=e.dispatch,n=e.rootState;return U.defaults.headers.common["Authorization"]="Bearer "+n.auth.token,new Promise(function(e,n){t(B),U.get("/user/account").then(function(o){var n=o.data;console.log("Success auth ",n),t(z,n),e(ot.status)}).catch(function(e){console.log("error"),t(T),o(K),n(ot.status)})})}),Object(tt["a"])(Je,I,function(e,t){var o=e.commit,n=e.dispatch,r=e.rootState;return U.defaults.headers.common["Authorization"]="Bearer "+r.auth.token,new Promise(function(e,r){o(I),U.put("/user/account",t).then(function(t){var r=t.data;console.log("Success change credentials ",r),o(L,r),n(B),e(ot.status)}).catch(function(e){console.log("error"),o(D),r(ot.status)})})}),Je),at=(Ye={},Object(tt["a"])(Ye,B,function(e){e.status="loading"}),Object(tt["a"])(Ye,z,function(e,t){console.log("should success"),e.status="success",n["a"].set(e,"profile",t)}),Object(tt["a"])(Ye,T,function(e){e.status="error"}),Object(tt["a"])(Ye,K,function(e){e.profile={}}),Object(tt["a"])(Ye,I,function(e){e.status="loading"}),Object(tt["a"])(Ye,L,function(e,t){e.status="success",n["a"].set(e,"profile",t)}),Object(tt["a"])(Ye,D,function(e){e.status="error"}),Ye),st={state:ot,getters:nt,actions:rt,mutations:at},it={number:localStorage.getItem("number")||0,token:localStorage.getItem("user-token")||"",status:"",hasLoadedOnce:!1},lt={isAuthenticated:function(e){return!!e.token},authStatus:function(e){return e.status}},ut=(Ke={},Object(tt["a"])(Ke,Q,function(e,t){var o=e.commit,n=e.dispatch;return new Promise(function(e,r){o(Q),U.post("/user/login",t).then(function(t){var r=t.data;console.log(r),r.err?("Invalid login or password"==r.err.message&&o(Y),e(r)):(localStorage.setItem("user-token",r.token),o(J,r),n(B),e(r))}).catch(function(e){console.log(e),o(Y,e),localStorage.removeItem("user-token"),r(e)})})}),Object(tt["a"])(Ke,K,function(e){var t=e.commit;e.dispatch;return new Promise(function(e,o){t(K),U.post("/user/logout").then(function(t){localStorage.removeItem("user-token"),e()})})}),Ke),ct=(Xe={},Object(tt["a"])(Xe,Q,function(e){e.status="loading"}),Object(tt["a"])(Xe,J,function(e,t){e.status="success",e.token=t.token,e.hasLoadedOnce=!0}),Object(tt["a"])(Xe,Y,function(e){e.status="error",e.hasLoadedOnce=!0}),Object(tt["a"])(Xe,K,function(e){e.token=""}),Xe),dt={state:it,getters:lt,actions:ut,mutations:ct},ft={status:"",hasLoadedOnce:!1},mt={registerhStatus:function(e){return e.status}},bt=Object(tt["a"])({},re,function(e,t){var o=e.commit;e.dispatch;return new Promise(function(e,n){o(re),U.post("/user/register",t).then(function(t){var n=t.data;console.log(n),n.err?(o(se),e(n)):(o(ae),e(n))}).catch(function(e){console.log(e),o(se,e),n(e)})})}),pt=(Ze={},Object(tt["a"])(Ze,re,function(e){e.status="loading"}),Object(tt["a"])(Ze,ae,function(e){e.status="success",e.hasLoadedOnce=!0}),Object(tt["a"])(Ze,se,function(e){e.status="error",e.hasLoadedOnce=!0}),Ze),ht={state:ft,getters:mt,actions:bt,mutations:pt};n["a"].use(b["a"]);var gt=new b["a"].Store({modules:{register:ht,user:st,auth:dt}});n["a"].use(A["a"]);var vt=function(e,t,o){gt.getters.isAdmin?o():o("/")},_t=function(e,t,o){console.log(gt),gt.getters.isAuthenticated?(console.log("got to / in router"),o("/")):o()},yt=function(e,t,o){gt.getters.isAuthenticated?o():o("/login")},wt=new A["a"]({mode:"history",base:"/",routes:[{path:"/controll",component:ze,beforeEnter:yt},{path:"/rooms",component:je,beforeEnter:yt},{path:"/login",component:te,beforeEnter:_t},{path:"/logout",beforeEnter:function(e,t,o){gt.dispatch(K).then(function(e){o("/login")}).catch(function(e){o("/")})}},{path:"/account",component:M,beforeEnter:yt},{path:"/",component:xe},{path:"/register",component:de,beforeEnter:_t},{path:"/dashboard",component:et,beforeEnter:vt}]}),Rt=o("a925");n["a"].use(Rt["a"]),n["a"].config.productionTip=!1;var kt=new Rt["a"]({locale:"en"});new n["a"]({i18n:kt,router:wt,store:gt,render:function(e){return e(j)}}).$mount("#app")},"572e":function(e,t,o){},"64a9":function(e,t,o){},"65da":function(e,t,o){"use strict";var n=o("d4ed"),r=o.n(n);r.a},"7d7a":function(e,t,o){},"7d8b":function(e,t,o){"use strict";var n=o("572e"),r=o.n(n);r.a},"7fc3":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"Buy rooms":"Buy rooms"},"ua":{"Buy rooms":"Купити кімнату","No availiable rooms":"Нема доступних кімнат","Room number:":"Кімната номер:","Get Started":"Розпочати","Buy this room":"Купити цю кімнату"}}'),delete e.options._Ctor}},"854d":function(e,t,o){},"90f8":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"Hello":"Hello","WelcometoOpenFurniture":"Welcome to OpenFurniture"},"ua":{"Hello":"Добрий день, ","WelcometoOpenFurniture":"Раді бачити вас в OpenFurniture","We can help you to customize your space in hotel":"Ми можем допомогти вам кастомізувати ваш простір в готелі","Get Started":"Розпочати"}}'),delete e.options._Ctor}},9306:function(e,t,o){"use strict";var n=o("7d7a"),r=o.n(n);r.a},"9fe6":function(e,t,o){"use strict";var n=o("1b08"),r=o.n(n);r.a},d4ed:function(e,t,o){},dc3c:function(e,t,o){},dcdf:function(e,t,o){"use strict";var n=o("15e3"),r=o.n(n);r.a},e145:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"Hello":"Hello","WelcometoOpenFurniture":"Welcome to OpenFurniture"},"ua":{"Hello":"Добрий день, ","WelcometoOpenFurniture":"Раді бачити вас в OpenFurniture"}}'),delete e.options._Ctor}},e483:function(e,t,o){},e85e:function(e,t,o){"use strict";var n=o("dc3c"),r=o.n(n);r.a},ea61:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"Home":"Home","Admin dashboard":"Admin dashboard","Controll state":"Controll state","Buy rooms":"Buy rooms","Sign In":"Sign In","Sign Up":"Sign Up","Account":"Account","Logout":"Logout","Lang":"Lang","UA":"UA","EN":"EN"},"ua":{"Home":"Домашня сторiнка","Admin dashboard":"Панель адмiнicтрування","Controll state":"Керування станом","Buy rooms":"Покупка кімнати","Sign In":"Вхід","Sign Up":"Реєстрація","Account":"Акаунт","Logout":"Вихід","Lang":"Мова","UA":"Українська","EN":"Англійська"}}'),delete e.options._Ctor}},fef3:function(e,t,o){"use strict";var n=o("0970"),r=o.n(n);t["default"]=r.a}});
//# sourceMappingURL=app.9d5707a1.js.map